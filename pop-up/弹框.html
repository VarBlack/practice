<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
		<style>
			.full-pop {
				position: absolute;
				left: 0;
				top: 0;
				width: 300px;
				padding:10px;
				background: #fff;
				border: 1px solid #ccc;
			}
			.dialogTop {
				overflow: hidden;
			}
			.dialogTop .title{
				float: left;
				font-size: 12px;
			}
			.dialogTop .close{
				float: right;
			}
			.content {
				padding:30px 0;
			}
			.pop-btns {
				text-align: right;
			}
		</style>
		<script>
			/*
				组件
					标准组件三个部分
						1. html结构 -> 模板
						2. 行为逻辑
						3. 接收数据或者定制模板
			*/
		</script>
		<script src="Drag.js"></script>
		<script>
			class Dialog extends Drag{
				constructor(obj){
					super();
					this.newObj = {
						title: '这是一个弹框',
						content: '这是默认的内容',
						okValue: '确定',
						cancelValue: '取消'						
					}
					Object.assign(this.newObj,obj);
					
					this.init();
					this.drag(this.dialog);
				}
				//初始化弹窗
				init(){
					this.dialog = this._createDialog();
					document.body.appendChild( this.dialog );
					this._positionDialog();
					this.close = this.dialog.querySelector('.close');
					this.cancel = this.dialog.querySelector('.cancel');
					this._addEvent();
					
				}
				//弹窗的模板
				_html(){
					return `<div class="dialogTop">
								<div class="title">${this.newObj.title}</div>
						        <span class="close" title="关闭">×</span>
							</div>
					        <div class="content">
					            ${this.newObj.content}
					        </div>
					        <div class="pop-btns">
						        <button class="ok">${this.newObj.okValue}</button>
						        <button class="cancel">${this.newObj.cancelValue}</button>
					        </div>`
				}
				_createDialog(){
					var div = document.createElement('div');
					div.className = 'full-pop';
					div.innerHTML = this._html();
					return div;
					
				}
				//设置弹窗的位置
				_positionDialog(){
					var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
					this.dialog.style.left = (document.documentElement.clientWidth - this.dialog.offsetWidth)/2 + 'px';
					this.dialog.style.top = (document.documentElement.clientHeight - this.dialog.offsetHeight)/2 + scrollTop + 'px';
				}
				
				//绑定事件
				_addEvent(){
					//窗口大小改变是改变弹窗的位置
					window.addEventListener('resize',function(){
						this._positionDialog();
					}.bind(this));
					//滚动条改变时是改变弹窗的位置
					window.addEventListener('scroll',function(){
						this._positionDialog();
					}.bind(this))
					//点击x消除弹窗
					this.close.addEventListener('click',function(){
						document.body.removeChild(this.dialog);
					}.bind(this))
					//点击取消消除弹窗
					this.cancel.addEventListener('click',function(){
						document.body.removeChild(this.dialog);
					}.bind(this))
				}
			}
		</script>
	</head>

	<body style="height: 3000px;">
		<input type="button" value="登录" id="login" />
		<!-- <div class="full-pop">
				<div class="dialogTop">
					<div class="title">这是一个弹框</div>
			        <span class="close" title="关闭">×</span>
				</div>
		        <div class="content">
		                                这里是弹框内容
		        </div>
		        <div class="pop-btns">
			        <button class="ok">确定</button>
			        <button class="cancel">取消</button>
		        </div>
		</div> -->
		<script>
			login.onclick  = function (){
				var obj = {
					title:'标题',
					content: '内容',
					okValue: 'ok'
				}
				
				new Dialog(obj);
			}
		</script>
	</body>
</html>